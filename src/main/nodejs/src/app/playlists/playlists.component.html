<h1>{{ 'playlists.title' | translate }}</h1>

<!-- Toolbar -->
<div class="row justify-content-between align-items-center g-0 my-3">
  <div class="col">
    <button type="button" class="btn btn-pink shadow" (click)="createPlaylist()"><i class="fas fa-plus"></i> {{ 'playlists.createButton' | translate }}</button>
  </div>
</div>

<!-- Playlists list -->
@if (playlists) {
  <div class="row">
    <div class="col">
      @if (playlistsRW.length > 0) {
        <div class="list-group shadow mb-3">
          @for (p of playlistsRW; track p.id) {
            <ng-container *ngTemplateOutlet="playlistItem; context: { playlist: p }" />
          }
        </div>
      }
      @if (playlistsRO.length > 0) {
        <div class="list-group shadow mb-3">
          @for (p of playlistsRO; track p.id) {
            <ng-container *ngTemplateOutlet="playlistItem; context: { playlist: p }" />
          }
        </div>
      }
      @if (playlists.length == 0) {
        <p>{{ 'playlists.noResults' | translate }}</p>
      }
    </div>
  </div>
} @else {
  <div class="d-flex justify-content-center">
    <div class="spinner-border spinner-border-lg" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
}

<!-- Playlist template -->
<ng-template #playlistItem let-p="playlist">
  <li (click)="gotoPlaylist(p)" class="list-group-item list-group-item-action d-flex align-items-center px-3 py-2">
    <div class="col">
      <p class="m-0">
        <i class="fas fa-fw" [ngClass]="{ 'fa-lock': p.readOnly, 'fa-list': !p.readOnly }"></i>
        {{ p.name }}
      </p>
    </div>
    <div class="col-auto d-none d-sm-block">
      @if (p.members) {
        <span class="badge text-bg-secondary mx-1 d-none d-md-inline" [title]="'playlists.membersTooltip' | translate"><i class="fas fa-users d-none d-md-inline"></i> {{ 'playlists.membersLabel'| translate:{count: p.members.length} }}</span>
      }
      @if (p.songsCount) {
        <span class="badge text-bg-secondary mx-1" [title]="'playlists.countTooltip' | translate"><i class="fas fa-music d-none d-md-inline"></i> {{ 'playlists.countLabel' | translate:{count: p.songsCount} }}</span>
      }
      @if (p.duration) {
        <span class="badge text-bg-secondary mx-1" [title]="'playlists.durationTooltip' | translate"><i class="fas fa-clock d-none d-md-inline"></i> {{ p.duration | duration }}</span>
      }
    </div>
    <div class="col-auto ms-2">
      <button type="button" class="btn btn-outline-secondary mx-1" [title]="'playlists.editTooltip' | translate" (click)="$event.stopPropagation(); editPlaylist(p)"><i class="fas fa-edit"></i></button>
      <button type="button" class="btn btn-outline-danger mx-1" [title]="'playlists.leaveTooltip' | translate" (click)="$event.stopPropagation(); leavePlaylist(p)"><i class="fas fa-sign-out-alt"></i></button>
    </div>
  </li>
</ng-template>
